# Buffer Pool Manager 

数据库系统的一个主要目标是减少磁盘和内存之间块的传输，其中一种办法就是在内存中保留尽量多的块，但是，不可能在内存中保留所有的块。

Buffer是 内存中存储磁盘块的备份的地方，Buffer Manager是负责缓冲区分配的子系统。

这个Lab就是要实现一个 Buffer Pool Manager

## Extendible Hashing Table 

实现一个动态哈希表。

注意 global depth增加 的条件 和 桶分裂的条件。

桶分裂的条件: 只要插入新元素之后，桶中元素的数目溢出了，桶就一定要分裂。 （但是不能无限分裂下去）

global depth增加的条件 : 插入新元素之后，桶中元素溢出了，且该桶的local depth等于global depth（或者说只有一个指针指向这个桶，就不得不增加 global depth）

还有注意的地方是，一次插入，可能会引起引起桶的多次分裂，因为桶重新分配之后，所有的元素还有可能在桶一个桶里面。

还有一种情况是，一个桶中的所有的元素的哈希值是相等的，如果这个桶溢出了，无论怎么重新分配（分裂同），所有的元素还是会在同一个桶里面，所以要限制桶分裂的次数，超过一定次数，就把溢出的元素放在一个溢出桶里面，不再分裂桶。 

## LRU REPLACER 

当缓冲区中没有块时，需要从缓存区中移除一个旧的块，为新的块留位置。 （这就替换）

大部分的数据库采用的替换机制是 LRU(Least Recently Used) 最近最少使用。把最近最少使用的块移除。

算法根据数据的历史访问记录来进行淘汰数据，其核心思想是“如果数据最近被访问过，那么将来被访问的几率也更高”。 

新数据插入到链表头部。 

某块缓存数据被访问，则将这块数据移到链表头部。 

当链表满的时候，将链表尾部的数据丢弃。

## Buffer Pool Manager 

